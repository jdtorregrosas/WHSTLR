<a href="/config">
  <img class="config" src='/public/assets/images/config-icon.ico' height='40'>
</a>
<div class="form">
  <form id="formCreateNotes" name="createNotes" method="post" action="/createNotes">
    <div class="form-item">
      <span> Project:</span>
      {{#if projects}}
        <select id="projects" name="projects">
          <option>Please Select<option>
          {{#each projects}}
            <option value="{{this.name}}")>{{this.name}}</option>
          {{/each}}
        </select>
      {{/if}}
    </div>
    <br>
    <div class="form-item">
      <span> Version Tag:</span>
      <select id="tags" name="tags">
        <option>Please Select</option>
      </select>
    </div>
    <br>
    <div class="form-item submit">
      <button class="button" id="btnSubmit" onclick='loading()' type="submit">Generate</button>
    </div>
  </form>
</div>
<script>
  $(document).on("change", '#projects', function(e) {
    var project = $(this).val()
    var $tags = $("#tags")
    $tags.html(
      $("<option />").attr('disabled','disabled').attr('selected','selected').text('Fetching tags...')
    )

    $.ajax({
      type: "POST",
      data: {project: project},
      url: '/getTags',
      dataType: 'json',
      success: function(json) {
        $tags.empty()
        $.each(json, function(value, key) {
          $tags.append($("<option />").attr("value", key.name).text(key.name))
        })
      }
    })
  })
</script>
<script>
  var loading = function () {
    swal({
      title: "Wait a moment, please!",
      text: "We are trying to proccess your request",
      imageUrl: "public/assets/images/thumbs-up.jpg"
    });
  }
  var error = function (err) {
    swal({
      title: "Baaad!",
      text: "Error",
      imageUrl: "public/assets/images/thumbs-up.jpg"
    });
  }
</script>
